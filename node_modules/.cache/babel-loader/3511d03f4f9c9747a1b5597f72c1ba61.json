{"ast":null,"code":"import firebase from \"firebase/app\";\nimport auth from \"../../firebase\";\nimport { LOAD_PROFILE, LOGIN_FAIL, LOGIN_REQUEST, LOGIN_SUCCESS, LOG_OUT } from \"../actionType\";\nexport const login = () => async dispatch => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope(\"https://www.googleapis.com/auth/youtube.force-ssl\");\n    const res = await auth.signInWithPopup(provider);\n    console.log(res);\n    const accessToken = res.credential.accessToken;\n    const profile = {\n      name: res.additionalUserInfo.profile.name,\n      photoURL: res.additionalUserInfo.profile.picture\n    };\n    sessionStorage.setItem(\"ytc-access-token\", accessToken);\n    sessionStorage.setItem(\"ytc-user\", JSON.stringify(profile));\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: accessToken\n    });\n    dispatch({\n      type: LOAD_PROFILE,\n      payload: profile\n    });\n  } catch (error) {\n    console.log(error.message);\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.message\n    });\n  }\n};\nexport const log_out = () => async dispatch => {\n  await auth.signOut();\n  dispatch({\n    type: LOG_OUT\n  });\n  sessionStorage.removeItem(\"ytc-access-token\");\n  sessionStorage.removeItem(\"ytc-user\");\n};","map":{"version":3,"sources":["/home/eshan/Desktop/newfolder/yt-clone/src/redux/actions/auth.action.js"],"names":["firebase","auth","LOAD_PROFILE","LOGIN_FAIL","LOGIN_REQUEST","LOGIN_SUCCESS","LOG_OUT","login","dispatch","type","provider","GoogleAuthProvider","addScope","res","signInWithPopup","console","log","accessToken","credential","profile","name","additionalUserInfo","photoURL","picture","sessionStorage","setItem","JSON","stringify","payload","error","message","log_out","signOut","removeItem"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AAEA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SACEC,YADF,EAEEC,UAFF,EAGEC,aAHF,EAIEC,aAJF,EAKEC,OALF,QAMO,eANP;AAQA,OAAO,MAAMC,KAAK,GAAG,MAAM,MAAOC,QAAP,IAAoB;AAC7C,MAAI;AACFA,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEL;AADC,KAAD,CAAR;AAGA,UAAMM,QAAQ,GAAG,IAAIV,QAAQ,CAACC,IAAT,CAAcU,kBAAlB,EAAjB;AACAD,IAAAA,QAAQ,CAACE,QAAT,CAAkB,mDAAlB;AAEA,UAAMC,GAAG,GAAG,MAAMZ,IAAI,CAACa,eAAL,CAAqBJ,QAArB,CAAlB;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AAEA,UAAMI,WAAW,GAAGJ,GAAG,CAACK,UAAJ,CAAeD,WAAnC;AAEA,UAAME,OAAO,GAAG;AACdC,MAAAA,IAAI,EAAEP,GAAG,CAACQ,kBAAJ,CAAuBF,OAAvB,CAA+BC,IADvB;AAEdE,MAAAA,QAAQ,EAAET,GAAG,CAACQ,kBAAJ,CAAuBF,OAAvB,CAA+BI;AAF3B,KAAhB;AAKAC,IAAAA,cAAc,CAACC,OAAf,CAAuB,kBAAvB,EAA2CR,WAA3C;AACAO,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCC,IAAI,CAACC,SAAL,CAAeR,OAAf,CAAnC;AAEAX,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEJ,aADC;AAEPuB,MAAAA,OAAO,EAAEX;AAFF,KAAD,CAAR;AAKAT,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEP,YADC;AAEP0B,MAAAA,OAAO,EAAET;AAFF,KAAD,CAAR;AAID,GA7BD,CA6BE,OAAOU,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACC,GAAR,CAAYa,KAAK,CAACC,OAAlB;AAEAtB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEN,UADC;AAEPyB,MAAAA,OAAO,EAAEC,KAAK,CAACC;AAFR,KAAD,CAAR;AAID;AACF,CAtCM;AAwCP,OAAO,MAAMC,OAAO,GAAG,MAAM,MAAOvB,QAAP,IAAoB;AAC/C,QAAMP,IAAI,CAAC+B,OAAL,EAAN;AACAxB,EAAAA,QAAQ,CAAC;AACPC,IAAAA,IAAI,EAAEH;AADC,GAAD,CAAR;AAIAkB,EAAAA,cAAc,CAACS,UAAf,CAA0B,kBAA1B;AACAT,EAAAA,cAAc,CAACS,UAAf,CAA0B,UAA1B;AACD,CARM","sourcesContent":["import firebase from \"firebase/app\";\n\nimport auth from \"../../firebase\";\nimport {\n  LOAD_PROFILE,\n  LOGIN_FAIL,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOG_OUT,\n} from \"../actionType\";\n\nexport const login = () => async (dispatch) => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST,\n    });\n    const provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope(\"https://www.googleapis.com/auth/youtube.force-ssl\");\n\n    const res = await auth.signInWithPopup(provider);\n    console.log(res);\n\n    const accessToken = res.credential.accessToken;\n\n    const profile = {\n      name: res.additionalUserInfo.profile.name,\n      photoURL: res.additionalUserInfo.profile.picture,\n    };\n\n    sessionStorage.setItem(\"ytc-access-token\", accessToken);\n    sessionStorage.setItem(\"ytc-user\", JSON.stringify(profile));\n\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: accessToken,\n    });\n\n    dispatch({\n      type: LOAD_PROFILE,\n      payload: profile,\n    });\n  } catch (error) {\n    console.log(error.message);\n\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.message,\n    });\n  }\n};\n\nexport const log_out = () => async (dispatch) => {\n  await auth.signOut();\n  dispatch({\n    type: LOG_OUT,\n  });\n\n  sessionStorage.removeItem(\"ytc-access-token\");\n  sessionStorage.removeItem(\"ytc-user\");\n};\n"]},"metadata":{},"sourceType":"module"}