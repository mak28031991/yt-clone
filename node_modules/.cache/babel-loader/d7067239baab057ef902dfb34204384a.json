{"ast":null,"code":"import firebase from \"firebase/app\";\nimport auth from \"../../firebase\";\nimport { LOAD_PROFILE, LOGIN_FAIL, LOGIN_REQUEST, LOGIN_SUCCESS } from \"../actionType\";\nexport const login = () => async dispatch => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const provider = new firebase.auth.GoogleAuthProvider();\n    const res = await auth.signInWithPopup(provider);\n    console.log(res);\n    const accessToken = res.credential.accessToken;\n    const profile = {\n      name: res.additionalUserInfo.profile.name,\n      photoURL: res.additionalUserInfo.profile.picture\n    };\n    sessionStorage.setItem(\"ytc-access-token\", accessToken);\n    sessionStorage.setItem(\"ytc-user\", JSON.stringify(profile));\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: accessToken\n    });\n    dispatch({\n      type: LOAD_PROFILE,\n      payload: profile\n    });\n  } catch (error) {\n    console.log(error.message);\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.message\n    });\n  }\n};\nexport const log_out = () => async dispatch => {\n  await auth.signOut();\n  dispatch({\n    type: LOG_OUT\n  });\n  sessionStorage.removeItem(\"ytc-access-token\");\n  sessionStorage.removeItem(\"ytc-user\");\n};","map":{"version":3,"sources":["/home/eshan/Desktop/newfolder/yt-clone/src/redux/actions/auth.action.js"],"names":["firebase","auth","LOAD_PROFILE","LOGIN_FAIL","LOGIN_REQUEST","LOGIN_SUCCESS","login","dispatch","type","provider","GoogleAuthProvider","res","signInWithPopup","console","log","accessToken","credential","profile","name","additionalUserInfo","photoURL","picture","sessionStorage","setItem","JSON","stringify","payload","error","message","log_out","signOut","LOG_OUT","removeItem"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AAEA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SACEC,YADF,EAEEC,UAFF,EAGEC,aAHF,EAIEC,aAJF,QAKO,eALP;AAOA,OAAO,MAAMC,KAAK,GAAG,MAAM,MAAOC,QAAP,IAAoB;AAC7C,MAAI;AACFA,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEJ;AADC,KAAD,CAAR;AAGA,UAAMK,QAAQ,GAAG,IAAIT,QAAQ,CAACC,IAAT,CAAcS,kBAAlB,EAAjB;AAEA,UAAMC,GAAG,GAAG,MAAMV,IAAI,CAACW,eAAL,CAAqBH,QAArB,CAAlB;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AAEA,UAAMI,WAAW,GAAGJ,GAAG,CAACK,UAAJ,CAAeD,WAAnC;AAEA,UAAME,OAAO,GAAG;AACdC,MAAAA,IAAI,EAAEP,GAAG,CAACQ,kBAAJ,CAAuBF,OAAvB,CAA+BC,IADvB;AAEdE,MAAAA,QAAQ,EAAET,GAAG,CAACQ,kBAAJ,CAAuBF,OAAvB,CAA+BI;AAF3B,KAAhB;AAKAC,IAAAA,cAAc,CAACC,OAAf,CAAuB,kBAAvB,EAA2CR,WAA3C;AACAO,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCC,IAAI,CAACC,SAAL,CAAeR,OAAf,CAAnC;AAEAV,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEH,aADC;AAEPqB,MAAAA,OAAO,EAAEX;AAFF,KAAD,CAAR;AAKAR,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEN,YADC;AAEPwB,MAAAA,OAAO,EAAET;AAFF,KAAD,CAAR;AAID,GA5BD,CA4BE,OAAOU,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACC,GAAR,CAAYa,KAAK,CAACC,OAAlB;AAEArB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEL,UADC;AAEPuB,MAAAA,OAAO,EAAEC,KAAK,CAACC;AAFR,KAAD,CAAR;AAID;AACF,CArCM;AAuCP,OAAO,MAAMC,OAAO,GAAG,MAAM,MAAOtB,QAAP,IAAoB;AAC/C,QAAMN,IAAI,CAAC6B,OAAL,EAAN;AACAvB,EAAAA,QAAQ,CAAC;AACPC,IAAAA,IAAI,EAAEuB;AADC,GAAD,CAAR;AAIAT,EAAAA,cAAc,CAACU,UAAf,CAA0B,kBAA1B;AACAV,EAAAA,cAAc,CAACU,UAAf,CAA0B,UAA1B;AACD,CARM","sourcesContent":["import firebase from \"firebase/app\";\n\nimport auth from \"../../firebase\";\nimport {\n  LOAD_PROFILE,\n  LOGIN_FAIL,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n} from \"../actionType\";\n\nexport const login = () => async (dispatch) => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST,\n    });\n    const provider = new firebase.auth.GoogleAuthProvider();\n\n    const res = await auth.signInWithPopup(provider);\n    console.log(res);\n\n    const accessToken = res.credential.accessToken;\n\n    const profile = {\n      name: res.additionalUserInfo.profile.name,\n      photoURL: res.additionalUserInfo.profile.picture,\n    };\n\n    sessionStorage.setItem(\"ytc-access-token\", accessToken);\n    sessionStorage.setItem(\"ytc-user\", JSON.stringify(profile));\n\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: accessToken,\n    });\n\n    dispatch({\n      type: LOAD_PROFILE,\n      payload: profile,\n    });\n  } catch (error) {\n    console.log(error.message);\n\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.message,\n    });\n  }\n};\n\nexport const log_out = () => async (dispatch) => {\n  await auth.signOut();\n  dispatch({\n    type: LOG_OUT,\n  });\n\n  sessionStorage.removeItem(\"ytc-access-token\");\n  sessionStorage.removeItem(\"ytc-user\");\n};\n"]},"metadata":{},"sourceType":"module"}